@import 'layout'

body.book
	
	align-items: start
	
	+high()
		padding-bottom: 1em
	
	header
		height: 4em
		
	figure
		grid-column: 1 / span 12
		grid-row: 2 / span 1
		overflow-x: scroll
		overflow-y: visible
		text-align: center
		flexRow()
		align-items: flex-end
		margin-left: auto
		margin-right: auto
		
		+landscape()
			grid-column: 6 / span 7
			text-align: left
			align-items: flex-start
			margin-left: 0
			margin-right: 0
			
		+wide()
			min-height: calc(100vh - 7.8em)
			align-items: flex-end
			
		+high()
			min-height: 0px
			max-height: calc(100vh - 6.8em - 5em)
			
		img
			max-width: 70vw
			
			+landscape()
				max-width: 100%
				
			+high()
				max-height: calc(100vh - 6.8em - 5em)
			
		&.front-and-back
			
			+tall()
				width: 100vw
				margin-left: -5vw // based on body padding
				
			+landscape()
				grid-column: 6 / span 7
				flexColumn()

			+wide()
				grid-column: 5 / span 8
				flexRow()
			
			img
				margin-right: 1em
				max-width: calc(50% - 0.5em)
				
				+tall()
					max-width: 75%
					
					&:first-of-type
						margin-left: 12%
						
					&:last-of-type
						max-width: 87% // width + padding
						padding-right: 12%
				
				+landscape()
					max-width: 100% // single, stacking images
					margin-bottom: 1em
					
					&:last-of-type
						margin-bottom: 0
					
				+wide()
					max-width: calc(50% - 0.5em) // same as original max-width, above
					margin-bottom: 0
			
	figcaption
		grid-column: 1 / span 12
		grid-row: 3 / span 1
		grid-12()
		margin-top: 2em
		font-size: 0.85em
		z-index: 2
		
		+landscape()
			grid-column: 1 / span 5
			grid-row: 2 / span 1
			margin-right: 2em
			margin-top: 5em
			align-self: flex-end
			
		+wide()
			grid-column: 1 / span 12
			align-items: end
			margin-right: 0
			align-self: end
			
		.caption
			grid-column: 1 / span 12
			max-width: 24em
			
			+portrait()
				grid-column: 1 / span 8
				
			+landscape()
				grid-column: 1 / span 12
			
			+wide()
				grid-column: 1 / span 4
				
		#show-colophon
			display: inline-block
			margin-top: 1em
			
		#colophon
			display: none
			margin-top: 1em
			
		dl
			margin-left: 1em
			line-height: 1.4em
						
		dt
			display: inline
			margin-left: -1em
			
			&::after
				content: ":"
				width: 0.4em
				display: inline-block
				
		dd
			display: inline
			margin: 0
			
		figcaption // figcaption within figcaption (prevent font size getting smaller)
			font-size: 1em
			
	aside
		font-size: 0.85rem
		margin-top: 1em
		flexRow()
		align-items: flex-end
		grid-column: 1 / span 12
		max-width: 24em
		
		+portrait()
			grid-column: 10 / span 3
			flexColumn()
			align-items: flex-start
			
		+square()
			grid-column: 11 / span 2
			
		+landscape()
			grid-column: 1 / span 12
			flexRow()
			align-items: flex-end
		
		+wide()
			grid-column: 12 / span 1
			flexColumn()
			align-items: flex-start
				
		.image, .images, figure
			flexRow()
			height: 5rem
			margin-right: 1em
			margin-left: 0
			min-height: unset
			
			+wide()
				margin-right: 0
			
			img
				max-width: 100%
				max-height: 100%
				margin-right: 0.5em
				
				&:last-of-type
					margin-right: 0
					
		.text, figcaption
			margin-top: 0.5em
			display: block
			
		h4
			text-transform: none
			font-size: 1em
			letter-spacing: 0
			font-style: italic
			
	figure.front-and-back + figcaption
		
		+landscape()
			align-self: start
			
		+wide()
			align-self: end

		.caption
			grid-column: 1 / span 12
			margin-right: 1em
			
			+portrait()
				grid-column: 1 / span 8
				
			+landscape()
				grid-column: 1 / span 12
			
			+wide()
				grid-column: 1 / span 4
				margin-right: 3em
		
		aside
			margin-right: 1em
			
			+portrait()
				grid-column: 11 / span 2
				
			+landscape()
				grid-column: 1 / span 4
				flexColumn()
				align-items: flex-start
			
			+wide()
				grid-column: 1 / span 4
				flexRow()
				align-items: flex-end
				margin-right: 3em
				
			.image, .images, figure
				margin-right: 1em
				
		aside.two
			+portrait()
				grid-column: 1 / span 12
				flexRow()
				align-items: flex-end
				
			+square()
				grid-column: 11 / span 2
				flexColumn()
				align-items: flex-start
				
			+landscape()
				grid-column: 1 / span 12
				flexRow()
				align-items: flex-end
				
			+wide()
				grid-column: 1 / span 4
				flexRow()
				align-items: flex-end
				margin-right: 3em
				
	p + p
		margin-top: 0
		text-indent: 1em